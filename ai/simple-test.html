<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gateway AI Simple Test</title>
    <style>
        body {
            background: linear-gradient(135deg, #0f1115 0%, #1a1d23 50%, #00d4ff 100%);
            color: white;
            font-family: system-ui, sans-serif;
            padding: 2rem;
            margin: 0;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(26, 29, 35, 0.8);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        button {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid #00d4ff;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
            font-weight: 600;
        }
        button:hover {
            background: rgba(0, 212, 255, 0.4);
        }
        .result {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #00d4ff;
        }
        .console-log {
            background: black;
            color: #00ff00;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üöÄ Gateway AI Simple Test</h1>
        <p>Testing Gateway AI functionality step by step...</p>
        
        <div>
            <button onclick="testBasicLoad()">1. Test Basic Load</button>
            <button onclick="testInitialization()">2. Test Initialization</button>
            <button onclick="testCommands()">3. Test Commands</button>
            <button onclick="testDNA()">4. Test DNA Injection</button>
            <button onclick="clearLog()">Clear Log</button>
        </div>
        
        <div id="results"></div>
        
        <h3>Console Output:</h3>
        <div id="console-output" class="console-log"></div>
    </div>

    <script>
        // Override console.log to capture output
        const originalConsoleLog = console.log;
        const originalConsoleError = console.error;
        
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            logToOutput('LOG: ' + args.join(' '));
        };
        
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            logToOutput('ERROR: ' + args.join(' '), true);
        };
        
        function logToOutput(message, isError = false) {
            const output = document.getElementById('console-output');
            const timestamp = new Date().toLocaleTimeString();
            const color = isError ? '#ff4444' : '#00ff00';
            output.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        function addResult(title, message, isSuccess = true) {
            const results = document.getElementById('results');
            const color = isSuccess ? '#10b981' : '#ef4444';
            const icon = isSuccess ? '‚úÖ' : '‚ùå';
            results.innerHTML += `<div class="result" style="border-left-color: ${color}">
                <strong>${icon} ${title}</strong><br>${message}
            </div>`;
        }
        
        function clearLog() {
            document.getElementById('console-output').innerHTML = '';
            document.getElementById('results').innerHTML = '';
        }
        
        let testGateway = null;

        function testBasicLoad() {
            console.log('üîç Testing basic JavaScript load...');
            
            try {
                // Test if the script loaded
                if (typeof GatewayAI === 'undefined') {
                    throw new Error('GatewayAI class not found - script not loaded');
                }
                
                addResult('JavaScript Load', 'GatewayAI class loaded successfully');
                console.log('‚úÖ GatewayAI class found');
                
                // Test constructor
                console.log('üì¶ GatewayAI type:', typeof GatewayAI);
                console.log('üîß Constructor available:', typeof GatewayAI.prototype.constructor);
                
            } catch (error) {
                addResult('JavaScript Load', error.message, false);
                console.error('‚ùå Load test failed:', error);
            }
        }

        function testInitialization() {
            console.log('üöÄ Testing Gateway AI initialization...');
            
            try {
                testGateway = new GatewayAI();
                
                addResult('Initialization', 'Gateway AI instance created successfully');
                console.log('‚úÖ Gateway AI initialized');
                console.log('üåê System version:', testGateway.getSystemVersion());
                console.log('üîß Current provider:', testGateway.currentProvider || 'None');
                
                // Test context
                if (testGateway.gatewayContext) {
                    console.log('üìã Context initialized:', Object.keys(testGateway.gatewayContext));
                    addResult('Context', `Context loaded with ${Object.keys(testGateway.gatewayContext).length} properties`);
                }
                
            } catch (error) {
                addResult('Initialization', error.message, false);
                console.error('‚ùå Initialization failed:', error);
            }
        }

        function testCommands() {
            console.log('‚ö° Testing Gateway commands...');
            
            if (!testGateway) {
                addResult('Commands', 'Please run initialization test first', false);
                return;
            }
            
            try {
                // Test help command
                testGateway.executeCommand('!help');
                addResult('Commands', '!help command executed successfully');
                
                // Test version command
                testGateway.executeCommand('!version');
                addResult('Version Command', '!version command executed successfully');
                
                // Test categories command
                testGateway.executeCommand('!categories');
                addResult('Categories Command', '!categories command executed successfully');
                
                console.log('‚úÖ Command system working');
                
            } catch (error) {
                addResult('Commands', error.message, false);
                console.error('‚ùå Command test failed:', error);
            }
        }

        function testDNA() {
            console.log('üß¨ Testing DNA injection system...');
            
            if (!testGateway) {
                addResult('DNA Injection', 'Please run initialization test first', false);
                return;
            }
            
            try {
                // Test DNA injection
                testGateway.injectGatewayDNA();
                
                // Check if DNA was injected
                if (window.GATEWAY_CONTEXT) {
                    addResult('DNA Injection', 'Gateway DNA injected successfully');
                    console.log('üß¨ DNA Context:', window.GATEWAY_CONTEXT.identity);
                    console.log('üéØ Capabilities:', window.GATEWAY_CONTEXT.capabilities.length);
                } else {
                    throw new Error('DNA injection failed - no GATEWAY_CONTEXT found');
                }
                
                // Test quantum link
                if (window.GATEWAY_QUANTUM) {
                    addResult('Quantum Link', `Active with frequency: ${window.GATEWAY_QUANTUM.frequency}`);
                    console.log('üåå Quantum frequency:', window.GATEWAY_QUANTUM.frequency);
                } else {
                    console.log('‚ö†Ô∏è Quantum link not established yet');
                }
                
                // Test communication bridge
                if (window.GATEWAY_COMMUNICATION) {
                    addResult('Communication Bridge', 'Bridge established with developer email');
                    console.log('üìß Developer email:', window.GATEWAY_COMMUNICATION.developer.email);
                } else {
                    console.log('‚ö†Ô∏è Communication bridge not found');
                }
                
            } catch (error) {
                addResult('DNA Injection', error.message, false);
                console.error('‚ùå DNA test failed:', error);
            }
        }

        // Auto-run basic test on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üé≠ Gateway AI Simple Test Page Loaded');
            setTimeout(() => {
                testBasicLoad();
            }, 500);
        });
    </script>
    
    <!-- Load Gateway AI script -->
    <script src="gateway-ai.js"></script>
</body>
</html>
