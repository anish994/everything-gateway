<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gateway AI Test - Step by Step</title>
    <style>
        body {
            font-family: 'SF Pro Display', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f1115 0%, #1a1d23 50%, #00d4ff 100%);
            color: white;
            padding: 2rem;
            margin: 0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(26, 29, 35, 0.8);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid rgba(0, 212, 255, 0.3);
            box-shadow: 0 20px 60px rgba(0, 212, 255, 0.2);
        }
        .test-step {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border-left: 4px solid #00d4ff;
        }
        .test-result {
            margin: 0.5rem 0;
            padding: 0.5rem;
            border-radius: 4px;
        }
        .success { background: rgba(16, 185, 129, 0.2); color: #10b981; }
        .error { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
        .info { background: rgba(0, 212, 255, 0.2); color: #00d4ff; }
        button {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid #00d4ff;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            margin: 0.25rem;
            transition: all 0.3s ease;
        }
        button:hover {
            background: rgba(0, 212, 255, 0.4);
            transform: translateY(-1px);
        }
        .log {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 4px;
            padding: 1rem;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üöÄ Gateway AI System Test</h1>
        <p>Testing the Gateway AI Universal Bridge step by step...</p>

        <div class="test-step">
            <h3>Step 1: Load Core JavaScript</h3>
            <button onclick="testStep1()">Test JavaScript Load</button>
            <div id="step1-result"></div>
        </div>

        <div class="test-step">
            <h3>Step 2: Initialize Gateway AI Class</h3>
            <button onclick="testStep2()">Test Initialization</button>
            <div id="step2-result"></div>
        </div>

        <div class="test-step">
            <h3>Step 3: Test Command System</h3>
            <button onclick="testStep3()">Test !help Command</button>
            <button onclick="testStep3b()">Test !version Command</button>
            <div id="step3-result"></div>
        </div>

        <div class="test-step">
            <h3>Step 4: Test DNA Injection</h3>
            <button onclick="testStep4()">Test DNA Injection</button>
            <div id="step4-result"></div>
        </div>

        <div class="test-step">
            <h3>Step 5: Test Live Update System</h3>
            <button onclick="testStep5()">Test Update System</button>
            <div id="step5-result"></div>
        </div>

        <div class="test-step">
            <h3>Step 6: Test Email System</h3>
            <button onclick="testStep6()">Test Email Command</button>
            <div id="step6-result"></div>
        </div>

        <div class="test-step">
            <h3>Console Log</h3>
            <div id="console-log" class="log"></div>
            <button onclick="clearLog()">Clear Log</button>
        </div>
    </div>

    <script src="gateway-ai.js"></script>
    <script>
        let testGateway = null;
        let originalConsoleLog = console.log;
        
        // Override console.log to capture output
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            const logElement = document.getElementById('console-log');
            logElement.innerHTML += args.join(' ') + '\n';
            logElement.scrollTop = logElement.scrollHeight;
        };

        function logResult(stepId, message, type = 'info') {
            const resultElement = document.getElementById(stepId);
            resultElement.innerHTML += `<div class="test-result ${type}">${message}</div>`;
        }

        function testStep1() {
            const resultId = 'step1-result';
            document.getElementById(resultId).innerHTML = '';
            
            try {
                if (typeof GatewayAI !== 'undefined') {
                    logResult(resultId, '‚úÖ Gateway AI class loaded successfully', 'success');
                    logResult(resultId, `üì¶ Class type: ${typeof GatewayAI}`, 'info');
                } else {
                    logResult(resultId, '‚ùå Gateway AI class not found', 'error');
                }
            } catch (error) {
                logResult(resultId, `‚ùå Error testing JS load: ${error.message}`, 'error');
            }
        }

        function testStep2() {
            const resultId = 'step2-result';
            document.getElementById(resultId).innerHTML = '';
            
            try {
                if (window.gatewayAI) {
                    logResult(resultId, '‚úÖ Gateway AI instance already exists', 'success');
                    testGateway = window.gatewayAI;
                } else {
                    testGateway = new GatewayAI();
                    logResult(resultId, '‚úÖ Gateway AI instance created manually', 'success');
                }
                
                logResult(resultId, `üîß Current provider: ${testGateway.currentProvider || 'None'}`, 'info');
                logResult(resultId, `üåê System version: ${testGateway.getSystemVersion()}`, 'info');
                
            } catch (error) {
                logResult(resultId, `‚ùå Error initializing: ${error.message}`, 'error');
                console.log('Initialization error:', error);
            }
        }

        function testStep3() {
            const resultId = 'step3-result';
            
            try {
                if (!testGateway) {
                    logResult(resultId, '‚ö†Ô∏è Gateway AI not initialized. Run Step 2 first.', 'error');
                    return;
                }
                
                testGateway.executeCommand('!help');
                logResult(resultId, '‚úÖ !help command executed', 'success');
                
            } catch (error) {
                logResult(resultId, `‚ùå Error testing commands: ${error.message}`, 'error');
                console.log('Command test error:', error);
            }
        }

        function testStep3b() {
            const resultId = 'step3-result';
            
            try {
                if (!testGateway) {
                    logResult(resultId, '‚ö†Ô∏è Gateway AI not initialized. Run Step 2 first.', 'error');
                    return;
                }
                
                testGateway.executeCommand('!version');
                logResult(resultId, '‚úÖ !version command executed', 'success');
                
            } catch (error) {
                logResult(resultId, `‚ùå Error testing version: ${error.message}`, 'error');
                console.log('Version test error:', error);
            }
        }

        function testStep4() {
            const resultId = 'step4-result';
            
            try {
                if (!testGateway) {
                    logResult(resultId, '‚ö†Ô∏è Gateway AI not initialized. Run Step 2 first.', 'error');
                    return;
                }
                
                testGateway.injectGatewayDNA();
                
                // Check if DNA was injected
                if (window.GATEWAY_CONTEXT) {
                    logResult(resultId, '‚úÖ Gateway DNA injected successfully', 'success');
                    logResult(resultId, `üß¨ Identity: ${window.GATEWAY_CONTEXT.identity}`, 'info');
                    logResult(resultId, `üéØ Capabilities: ${window.GATEWAY_CONTEXT.capabilities.length} detected`, 'info');
                } else {
                    logResult(resultId, '‚ùå DNA injection failed', 'error');
                }
                
            } catch (error) {
                logResult(resultId, `‚ùå Error testing DNA injection: ${error.message}`, 'error');
                console.log('DNA injection error:', error);
            }
        }

        function testStep5() {
            const resultId = 'step5-result';
            
            try {
                if (!testGateway) {
                    logResult(resultId, '‚ö†Ô∏è Gateway AI not initialized. Run Step 2 first.', 'error');
                    return;
                }
                
                testGateway.executeCommand('!update');
                logResult(resultId, '‚úÖ Update system tested', 'success');
                
                // Check if quantum link exists
                if (window.GATEWAY_QUANTUM) {
                    logResult(resultId, `üåå Quantum link active: ${window.GATEWAY_QUANTUM.frequency}`, 'success');
                } else {
                    logResult(resultId, '‚ö†Ô∏è Quantum link not established', 'error');
                }
                
            } catch (error) {
                logResult(resultId, `‚ùå Error testing update system: ${error.message}`, 'error');
                console.log('Update system error:', error);
            }
        }

        function testStep6() {
            const resultId = 'step6-result';
            
            try {
                if (!testGateway) {
                    logResult(resultId, '‚ö†Ô∏è Gateway AI not initialized. Run Step 2 first.', 'error');
                    return;
                }
                
                testGateway.executeCommand('!email Testing the Gateway AI system - all systems operational!');
                logResult(resultId, '‚úÖ Email system tested', 'success');
                
                // Check communication bridge
                if (window.GATEWAY_COMMUNICATION) {
                    logResult(resultId, `üìß Developer email: ${window.GATEWAY_COMMUNICATION.developer.email}`, 'info');
                    logResult(resultId, '‚úÖ Communication bridge established', 'success');
                } else {
                    logResult(resultId, '‚ö†Ô∏è Communication bridge not found', 'error');
                }
                
            } catch (error) {
                logResult(resultId, `‚ùå Error testing email system: ${error.message}`, 'error');
                console.log('Email system error:', error);
            }
        }

        function clearLog() {
            document.getElementById('console-log').innerHTML = '';
        }

        // Auto-run basic tests when page loads
        setTimeout(() => {
            console.log('üöÄ Gateway AI Test Page Loaded');
            console.log('üîç Running automatic tests...');
            testStep1();
            setTimeout(() => testStep2(), 1000);
        }, 1000);
    </script>
</body>
</html>
